{"ast":null,"code":"import { ethers } from 'ethers';\nimport HealthcareRecordsArtifact from '../artifacts/contracts/HealthcareRecords.sol/HealthcareRecords.json';\n\n// Update with your deployed contract address\nconst contractAddress = \"0x5FbDB2315678afecb367f032d93F642f64180aa3\";\nconsole.log(\"Using hardcoded contract address:\", contractAddress);\nexport const connectWallet = async () => {\n  if (!window.ethereum) {\n    alert('Please install MetaMask to use this application');\n    return null;\n  }\n  try {\n    // Request account access\n    const accounts = await window.ethereum.request({\n      method: 'eth_requestAccounts'\n    });\n\n    // Create a provider\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\n\n    // Get the signer\n    const signer = provider.getSigner();\n\n    // Create a contract instance\n    const contract = new ethers.Contract(contractAddress, HealthcareRecordsArtifact.abi, signer);\n    return {\n      address: accounts[0],\n      provider,\n      signer,\n      contract\n    };\n  } catch (error) {\n    console.error('Error connecting to wallet:', error);\n    return null;\n  }\n};\nexport const checkIfDoctor = async (contract, address) => {\n  try {\n    return await contract.isDoctor(address);\n  } catch (error) {\n    console.error('Error checking if doctor:', error);\n    return false;\n  }\n};\nexport const addPatient = async (contract, patientId, name, age, disease) => {\n  try {\n    const tx = await contract.addPatient(patientId, name, age, disease);\n    await tx.wait();\n    return tx.hash;\n  } catch (error) {\n    console.error('Error adding patient:', error);\n    throw error;\n  }\n};\nexport const updatePatient = async (contract, patientId, disease) => {\n  try {\n    const tx = await contract.updatePatient(patientId, disease);\n    await tx.wait();\n    return tx.hash;\n  } catch (error) {\n    console.error('Error updating patient:', error);\n    throw error;\n  }\n};\nexport const getPatient = async (contract, patientId) => {\n  try {\n    const patient = await contract.getPatient(patientId);\n    return {\n      name: patient.name,\n      age: patient.age.toString(),\n      disease: patient.disease,\n      doctorAssigned: patient.doctorAssigned\n    };\n  } catch (error) {\n    console.error('Error getting patient:', error);\n    throw error;\n  }\n};\nexport const authorizeDoctor = async (contract, patientId, doctorAddress) => {\n  try {\n    const tx = await contract.authorizeDoctor(patientId, doctorAddress);\n    await tx.wait();\n    return tx.hash;\n  } catch (error) {\n    console.error('Error authorizing doctor:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["ethers","HealthcareRecordsArtifact","contractAddress","console","log","connectWallet","window","ethereum","alert","accounts","request","method","provider","providers","Web3Provider","signer","getSigner","contract","Contract","abi","address","error","checkIfDoctor","isDoctor","addPatient","patientId","name","age","disease","tx","wait","hash","updatePatient","getPatient","patient","toString","doctorAssigned","authorizeDoctor","doctorAddress"],"sources":["C:/Users/rahul/Desktop/New bl medi/frontend/src/utils/blockchain.js"],"sourcesContent":["import { ethers } from 'ethers';\r\nimport HealthcareRecordsArtifact from '../artifacts/contracts/HealthcareRecords.sol/HealthcareRecords.json';\r\n\r\n// Update with your deployed contract address\r\nconst contractAddress = \"0x5FbDB2315678afecb367f032d93F642f64180aa3\";\r\n\r\nconsole.log(\"Using hardcoded contract address:\", contractAddress);\r\n\r\nexport const connectWallet = async () => {\r\n  if (!window.ethereum) {\r\n    alert('Please install MetaMask to use this application');\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    // Request account access\r\n    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n    \r\n    // Create a provider\r\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n    \r\n    // Get the signer\r\n    const signer = provider.getSigner();\r\n    \r\n    // Create a contract instance\r\n    const contract = new ethers.Contract(\r\n      contractAddress,\r\n      HealthcareRecordsArtifact.abi,\r\n      signer\r\n    );\r\n    \r\n    return { \r\n      address: accounts[0], \r\n      provider, \r\n      signer, \r\n      contract \r\n    };\r\n  } catch (error) {\r\n    console.error('Error connecting to wallet:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\nexport const checkIfDoctor = async (contract, address) => {\r\n  try {\r\n    return await contract.isDoctor(address);\r\n  } catch (error) {\r\n    console.error('Error checking if doctor:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const addPatient = async (contract, patientId, name, age, disease) => {\r\n  try {\r\n    const tx = await contract.addPatient(patientId, name, age, disease);\r\n    await tx.wait();\r\n    return tx.hash;\r\n  } catch (error) {\r\n    console.error('Error adding patient:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updatePatient = async (contract, patientId, disease) => {\r\n  try {\r\n    const tx = await contract.updatePatient(patientId, disease);\r\n    await tx.wait();\r\n    return tx.hash;\r\n  } catch (error) {\r\n    console.error('Error updating patient:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getPatient = async (contract, patientId) => {\r\n  try {\r\n    const patient = await contract.getPatient(patientId);\r\n    return {\r\n      name: patient.name,\r\n      age: patient.age.toString(),\r\n      disease: patient.disease,\r\n      doctorAssigned: patient.doctorAssigned\r\n    };\r\n  } catch (error) {\r\n    console.error('Error getting patient:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const authorizeDoctor = async (contract, patientId, doctorAddress) => {\r\n  try {\r\n    const tx = await contract.authorizeDoctor(patientId, doctorAddress);\r\n    await tx.wait();\r\n    return tx.hash;\r\n  } catch (error) {\r\n    console.error('Error authorizing doctor:', error);\r\n    throw error;\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}